{"version":3,"sources":["admin.js","ajax-settings.js","reports.js"],"names":["tailwind","config","theme","extend","colors","java","DEFAULT","50","100","200","300","400","500","600","700","800","900","brand","primary","primary-hover","primary-focus","danger","danger-hover","danger-focus","input","inactive","active","jQuery","document","ready","$","snippet_type","anonymizeip","anonymizeip_checkbox","gtm_id","countdown","countdownElement","getElementById","targetDate","Date","now","diff","getTime","days","Math","floor","innerHTML","disable_element","el","attr","enable_element","removeAttr","set_checked_value","bool","checked","widget","bridge","ui","tooltip","gaetooltip","position","my","at","collision","on","this","is","show","hide","e","slideDown","preventDefault","slideUp","val","sessionStorage","getItem","css","pointer-events","opacity","prop","checkbox","index","data","trackValue","eventValue","trigger","window","open","gaeAjax","openAndPoplulateEventModal","id_post","modalId","ajax","type","url","wpflow_ajax","ajax_url","post_id","action","success","result","modal","populateMetaEditForm","meta","hasOwnProperty","error","alert","saveGAView","nonce","viewId","ajax_nonce","location","reload","signOutFromGoogleAnalytics","redirect_url","btoa","protocol","host","pathname","search","accessToken","removeItem","submitEventForm","form","serialize","fn","noConflict","toggleClass","href","Promise","resolve","global_from_date","global_to_date","g","fjs","queryString","refresh_report","urlParams","URLSearchParams","currentPage","get","ga_reports","ga_view_id","async","allEventsReportRequest","includeEmptyRows","dateRanges","startDate","endDate","metrics","expression","dimensions","name","top10DownloadsReportRequest","filtersExpression","orderBys","fieldName","orderType","sortOrder","pageSize","top10EmailLinksReportRequest","reportResponse","queryReports","drawLineChart","reports","rows","drawTableChart","displayGeneralReports","filterExpressionArray","Array","filterExpression","clicksCategories","push","clicksLabels","clicksActions","allClicksReportRequest","join","top10ClicksByCategoryReportRequest","top10ClicksByLabelReportRequest","top10ClicksByActionReportRequest","displayClicksReports","scrollCategories","scrollLabels","scrollActions","allScrollEventsReportRequest","top10ScrollByCategoryReportRequest","top10ScrollByLabelReportRequest","top10ScrollByActionReportRequest","displayScrollReports","redirect2AuthProxy","w","d","gapi","analytics","q","cb","js","createElement","getElementsByTagName","src","parentNode","insertBefore","onload","load","google","charts","packages","auth","response","authenticate","then","r","fromDate","moment","subtract","startOf","toDate","endOf","format","daterangepicker","datepickerOptions","numberOfMonths","minDate","maxDate","altFormat","start","end","change","event","dateRange","tokenCreated","setItem","timeElapsed","timeRemaining","authorize","serverAuth","access_token","viewSelector","ViewSelector","container","toggle","execute","ids","reportBatchRequests","client","request","path","root","method","body","reportRequests","title","xAxisName","xAxisType","yAxisName","yAxisType","reportRows","chartContainer","visualization","DataTable","addColumn","length","forEach","row","addRow","stringDate","year","substr","month","day","D","getFullYear","getMonth","getDate","parseInt","values","Line","draw","convertOptions","curveType","legend","textStyle","fontSize","col1Name","col1Type","col2Name","col2Type","options","setColumnProperty","showRowNumber","width","height","addRows","minWidth","Table"],"mappings":"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","file":"admin-scripts.min.js","sourcesContent":["/**\n * Created with IntelliJ IDEA.\n * User: yuval\n * Date: 2/25/15\n * Time: 1:08 PM\n * To change this template use File | Settings | File Templates.\n */\n\n\ntailwind.config = {\n\ttheme: {\n\t\textend: {\n\t\t\tcolors: {\n\t\t\t\tjava: {\n\t\t\t\t\tDEFAULT: '#19C8B4',\n\t\t\t\t\t50: '#A5F4EB',\n\t\t\t\t\t100: '#93F1E7',\n\t\t\t\t\t200: '#6EEDDE',\n\t\t\t\t\t300: '#4AE8D6',\n\t\t\t\t\t400: '#26E4CE',\n\t\t\t\t\t500: '#19C8B4',\n\t\t\t\t\t600: '#139687',\n\t\t\t\t\t700: '#0D645A',\n\t\t\t\t\t800: '#06322D',\n\t\t\t\t\t900: '#000100',\n\t\t\t\t},\n\t\t\t\tbrand: {\n\t\t\t\t\tprimary: '#785afa',\n\t\t\t\t\t'primary-hover': '#B9A9FC',\n\t\t\t\t\t'primary-focus': '#D9D1FE',\n\t\t\t\t\tdanger: '#9c095d',\n\t\t\t\t\t'danger-hover': '#da0790',\n\t\t\t\t\t'danger-focus': '#c91444',\n\t\t\t\t\tinput: '#8c8f94',\n\t\t\t\t\t50: '#FFFFFF',\n\t\t\t\t\t100: '#FAF8FF',\n\t\t\t\t\t200: '#D9D1FE',\n\t\t\t\t\t300: '#B9A9FC',\n\t\t\t\t\t400: '#9882FB',\n\t\t\t\t\t500: '#785AFA',\n\t\t\t\t\t600: '#4B24F8',\n\t\t\t\t\t700: '#2F07DD',\n\t\t\t\t\t800: '#2305A7',\n\t\t\t\t\t900: '#180370',\n\t\t\t\t\tinactive: '#4B24F8',\n\t\t\t\t\tactive: '#5a527e',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t},\n}\n\njQuery(document).ready(function($){\n\n\tvar snippet_type = $('#snippet_type');\n\tvar anonymizeip = $('#anonymizeip');\n\tvar anonymizeip_checkbox = $('#anonymizeip')[0];\n\tvar gtm_id = $('#gtm_id');\n\tvar script_debug_mode_input = $('#script_debug_mode');\n\n\n\t\tfunction countdown() {\n\t\t\tconst countdownElement = document.getElementById('countdown');\n\t\tconst targetDate = new Date('2023-07-01T00:00:00');\n\n\t\t\tconst now = new Date();\n\t\tconst diff = targetDate.getTime() - now.getTime();\n\t\t\t\tif (diff > 0) {const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n\n\t\t\t\tcountdownElement.innerHTML = `\n\t\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t\t<span class=\"underline\">${days}</span>\n\t\t\t\t\t\t\t\tdays,\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;}\n\t\t\t\telse {countdownElement.innerHTML = `\n\t\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t\t<span class=\"underline\">0</span> \n\t\t\t\t\t\t\t\tdays,\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;\n\t\t\t}\n\t\t\t\t}\n\n\t\tcountdown();\n\n\t// Helpers to avoid repetition\n\tfunction disable_element(el){\n\t\tel.attr(\"disabled\", true);\n\t}\n\n\tfunction enable_element(el){\n\t\tel.removeAttr(\"disabled\");\n\t}\n\n\tfunction set_checked_value(el, bool){\n\t\tel.checked = bool;\n\t}\n\n\t// set up tooltips\n\t$.widget.bridge('gaetooltip', $.ui.tooltip);\n\n\t$('.ga-tooltip').gaetooltip({position: {\n\t\tmy: \"left bottom-10\",\n\t\tat: \"right top\",\n\t\tcollision: \"none\"\n\t}\n\t})\n\n\t$('#advanced:checkbox').on('change', function (){\n\t\tvar checked = $(this).is(':checked');\n\t\tif (checked){\n\t\t\t$('#forcesnopperwrap').show();\n\t\t\t$('#wpflow_gs_reports_section').show();\n\t\t} else {\n\t\t\t$('#forcesnopperwrap').hide();\n\t\t\t$('#wpflow_gs_reports_section').hide();\n\t\t}\n\t});\n\n\t$('.btn_upload').on('click', function (e){\n\t\t$('.settings_content').slideDown();\n\t\te.preventDefault();\n\t});\n\n\t$('.btn_close').on('click', function (e){\n\t\t$('.settings_content').slideUp();\n\t\te.preventDefault();\n\t});\n\n\t$('.popup').on('click', function (e){\n\t\t$('.popup').slideUp();\n\t\te.preventDefault();\n\t});\n\n\n\t/*\n\t * The following section deals with the snippet type options in the admin UI\n\t */\n\n\t// If page loads and snippet type is 'none' or 'gtm', disable anonymize IP checkbox\n\tif (snippet_type.val()=== 'none' || snippet_type.val()=== 'gtm'){\n\t\tset_checked_value(anonymizeip_checkbox, false);\n\t\tdisable_element(anonymizeip);\n\t}\n\n\t// If page loads and snippet_type is 'gtm', enable gtm_id\n\tif (snippet_type.val()=== 'gtm'){\n\t\tenable_element(gtm_id);\n\t} else {\n\t\tdisable_element(gtm_id);\n\t}\n\n\t// When the snippet type option is changed\n\tsnippet_type.on('change', function (){\n\t\t// Store current value\n\t\tvar val = $(this).val();\n\n\t\t// If 'none' is selected, disable anonymize zip checkbox and ?\n\t\tif (val === 'none' || val === 'gtm'){\n\t\t\tset_checked_value(anonymizeip_checkbox, false);\n\t\t\tdisable_element(anonymizeip);\n\t\t} else {\n\t\t\tenable_element(anonymizeip);\n\t\t}\n\n\t\t// If gtm snippet is selected\n\t\tif (val === 'gtm'){\n\t\t\tenable_element(gtm_id);\n\t\t} else {\n\t\t\tdisable_element(gtm_id);\n\t\t}\n\t});\n\n\t// Snippet section ends\n\n\t// The following section deals with the import settings functinality in\n\t// general settings\n\t$('.btn_upload').on('click', function (e){\n\t\t$('.settings_content').slideDown();\n\t\te.preventDefault();\n\t});\n\n\t$('.btn_close').on('click', function (e){\n\t\t$('.settings_content').slideUp();\n\t\te.preventDefault();\n\t});\n\n\t$('.popup').on('click', function (e){\n\t\t$('.popup').slideUp();\n\t\te.preventDefault();\n\t});\n\n\t// import section ends\n\n    // GA client Signout section\n\n    // If page loads and there is no gaAccessToken then disable signout button.\n    if (!sessionStorage.getItem('gaAccessToken')) {\n\t\tdisable_element($('.btn_signout_ga'));\n\t  }\t\n\n\n\t// Disable checkbox for admin options management permission\n\t$('input[name=\"ga_events_options[permitted_roles][]\"][value=\"administrator\"]').css({'pointer-events': 'none',\n\t\t'opacity': 0.5}).prop('checked', true);\n\n\t$('.divs-istracktime:checkbox').on('change', function (){\n\t\tvar checkbox = $(this);\n\t\tvar checked = checkbox.is(':checked');\n\t\tvar index = checkbox.data('track');\n\t\tvar trackValue = \"#track-elem\" + index;\n\t\tvar eventValue = \"#eventValue\" + index;\n\t\tif (checked){\n\t\t\t$(trackValue).show();\n\t\t\t$(eventValue).attr(\"disabled\", true);\n\t\t} else {\n\t\t\t$(trackValue).hide();\n\t\t\t$(eventValue).removeAttr(\"disabled\");\n\t\t}\n\n\t});\n\n\t$('#empty-istracktime:checkbox').on('change', function (){\n\t\tvar checkbox = $(this);\n\t\tvar checked = checkbox.is(':checked');\n\t\tvar trackValue = \"#empty-trackelem\";\n\t\tvar eventValue = \"#empty-eventValue\";\n\t\tif (checked){\n\t\t\t$(trackValue).show();\n\t\t\t$(eventValue).attr(\"disabled\", true);\n\t\t} else {\n\t\t\t$(trackValue).hide();\n\t\t\t$(eventValue).removeAttr(\"disabled\");\n\t\t}\n\n\t});\n\n\t$('.divs-istracktime').trigger('change');\n\n\tfunction isUrlValid(url){\n\t\treturn /^(https?|s?ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(url);\n\t}\n\n\t\n\tjQuery('body').on('click','a[href=\"admin.php?page=wp-google-analytics-events-upgrade\"]', function (e) {\n\t\te.preventDefault();\n\t\twindow.open('https://wpflow.com/upgrade/?utm_source=wpadmin&utm_medium=banner&utm_campaign=nav', '_blank');\n\t});\n});\n","/*global\n $, wpflow_ajax, jslint, alert\n */\nvar gaeAjax = ( function ( $ ) {\n\n  $(document).ready( function ( $ ) {\n\n    // Handle twitter bootstrap modals\n    if (typeof $.fn.modal.noConflict !== \"undefined\") {\n      var bootstrapModal = $.fn.modal.noConflict();\n    }\n\n    // Form Submit\n      $(\".wpgae-event-form\").on('submit', submitEventForm);\n    // Populate and Show the edit event modal\n    $(\".ga_main .edit a\").on('click', openAndPoplulateEventModal);\n    // Populate and Show the Delete event modal\n    $(\".ga_main .delete a\").on('click', openAndPoplulateEventModal);\n    $(\"#ga-save-view\").on('click', saveGAView);\n    $('.btn_signout_ga').on('click', signOutFromGoogleAnalytics);\n\n    $('.deactivate a[href*=\"wp-google-analytics-events\"], #wpgae-modal-cancel a').on('click', function(e) {\n      e.preventDefault();\n      $(\"#wpgae-modal-content, #wpgae-modal-background\").toggleClass(\"active\");\n      $(\"#wpgae-just-deactivate\").attr(\"href\", this.href);\n    });\n\n    $('#wpgae-feedback-form').on('submit', function (e) {\n      e.preventDefault(); // avoid to execute the actual submit of the form.\n      var form = $(this);\n\n      $.ajax({\n        type: \"POST\",\n        url: wpflow_ajax.ajax_url,\n        data: form.serialize(), // serializes the form's elements.\n        success: function(data)\n        {\n          window.location = $(\"#wpgae-just-deactivate\").attr(\"href\");\n        }\n      });\n\n    });\n\n  });\n\n\n  function openAndPoplulateEventModal(e) {\n    e.preventDefault();\n    var id_post = $(this).attr('id');\n    var modalId = \"#\" + $(this).data(\"action\");\n    $.ajax({\n      type: 'POST',\n      url: wpflow_ajax.ajax_url,\n      data: {\n        'post_id': id_post,\n        'action': 'wpflow_get_event_json'\n      },\n      success: function (result) {\n        $(modalId).modal();\n        populateMetaEditForm(modalId, result.meta);\n        $(modalId + \" #event_id\").val(id_post);\n      },\n      error: function () {\n        alert(\"Error updating event\");\n      }\n    });\n  }\n\n  function saveGAView(e) {\n    var nonce = $(this).data(\"nonce\");\n    $.ajax({\n      type: \"post\", url: wpflow_ajax.ajax_url, data: {\n        'viewId': $(this).val(), 'action': 'wpflow_save_view', 'ajax_nonce': nonce,\n      }, success: function (data) {\n        window.location.reload();\n      }\n    });\n  }\n\n  function signOutFromGoogleAnalytics(e) {\n    e.preventDefault();\n    var nonce = $(this).data(\"delete-nonce\");\n    $.ajax({\n      type: \"post\", url: wpflow_ajax.ajax_url, data: {\n        'viewId': $(this).val(), 'action': 'wpflow_ga_disconnect', 'ajax_nonce': nonce,\n      },\n      success: function (data) {\n        var redirect_url = btoa( window.location.protocol+ \"//\" + window.location.host+window.location.pathname+window.location.search);\n        var accessToken = btoa(sessionStorage.getItem('gaAccessToken'));\n        sessionStorage.removeItem('gaAccessToken');\n        sessionStorage.removeItem('gaTokenCreated');\n        // var encodedRedirectUrl = encodeURIComponent(redirect_url);\n        // var encodedAccessToken = encodeURIComponent(accessToken);\n        window.location = 'https://auth.wpflow.com/ga/sign_out/?redirectUrl=' + redirect_url + '&accessToken=' + accessToken;\n      }\n    });\n  }\n\n  function submitEventForm(e) {\n    e.preventDefault();\n    var form = $(this);\n\n    $.ajax({\n      type: \"post\",\n      url: wpflow_ajax.ajax_url,\n      data: form.serialize(),\n      success: function (data) {\n        window.location.reload();\n      }\n    });\n  }\n  \n  function populateMetaEditForm(modal, meta) {\n    if (typeof meta !== \"undefined\") {\n      for (var input in meta) {\n        if (meta.hasOwnProperty(input)) {\n          if ($(modal + \" #\" + input).is(\":checkbox\")) {\n            if (meta[input][0] === \"true\") {\n              $(modal + \" #\" + input).attr(\"checked\", true);\n            } else {\n              $(modal + \" #\" + input).removeAttr(\"checked\", false);\n            }\n          } else {\n            $(modal + \" #\" + input).val(meta[input][0]);\n          }\n        }\n      }\n    }\n  }\n\n} )( jQuery );\n\n\n\n\n\n\n ","\n\n(function () {\n\n  var queue = Promise.resolve();\n  // Starting point..\n\n\n  var queryString = window.location.search;\n  var urlParams = new URLSearchParams(queryString);\n  var report = urlParams.get(\"report\") === \"true\";\n  var global_from_date,global_to_date;\n\n  if (report) {\n    (function (w, d, s, g, js, fjs) {\n      g = w.gapi || (w.gapi = {});\n      g.analytics = {\n        q: [], ready: function (cb) {\n          this.q.push(cb)\n        }\n      };\n      js = d.createElement(s);\n      fjs = d.getElementsByTagName(s)[0];\n      js.src = 'https://apis.google.com/js/platform.js';\n      fjs.parentNode.insertBefore(js, fjs);\n      js.onload = function () {\n        g.load('analytics')\n      };\n    }(window, document, 'script'));\n\n    google.charts.load('current', {'packages': ['corechart', 'line', 'table']});\n    gapi.analytics.ready(function () {\n\n    // Put your application code here...\n\n      // Register on authorization success event\n\n      gapi.analytics.auth.on('signIn', function (response) {\n        // if (typeof ga_reports.ga_view_id === 'undefined') {\n        //dateRangeSelector.execute();\n      });\n\n      // Call the authenticate function that will take care to authorize the user\n      authenticate().then(r => {\n        // Set default date range for the reports\n        var fromDate = moment().subtract(30,'days').startOf('day').toDate();\n        var toDate = moment().endOf('day').toDate();\n        global_from_date = moment(fromDate).format('YYYY-MM-DD');\n        global_to_date = moment(toDate).format('YYYY-MM-DD');\n\n        //Display the date range selector\n        jQuery('#daterange').daterangepicker({\n          datepickerOptions : {\n            numberOfMonths : 2,\n            minDate: '-12M',\n            maxDate: '+0',\n            altFormat: \"yyyy-mm-dd\"\n          }\n        });\n\n        jQuery('#daterange').daterangepicker(\"setRange\",{start: fromDate, end: toDate });\n        jQuery('#daterange').daterangepicker({change: function(event, data) {\n            var dateRange = jQuery('#daterange').daterangepicker(\"getRange\");\n            global_from_date = moment(dateRange.start).format('YYYY-MM-DD');\n            global_to_date = moment(dateRange.end).format('YYYY-MM-DD');\n            refresh_report();\n          }\n        });\n\n        refresh_report();\n      });\n    });\n  }\n\n  function refresh_report() {\n\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const currentPage = urlParams.get(\"page\");\n\n    if (typeof ga_reports === 'undefined' || typeof ga_reports.ga_view_id === 'undefined'){\n      return;\n    }\n    if (currentPage === \"wp-google-analytics-events\") {\n      displayGeneralReports();\n    } else if (currentPage === \"wp-google-analytics-events-click\") {\n      displayClicksReports();\n    } else if (currentPage === \"wp-google-analytics-events-scroll\") {\n       displayScrollReports();\n    }\n  }\n\n\n  function redirect2AuthProxy() {\n    var redirect_url = btoa(window.location.protocol + \"//\" + window.location.host + window.location.pathname + window.location.search);\n    // we need to actually redirect to allow redirection to google\n    window.location = 'https://auth.wpflow.com/ga/auth/' + redirect_url;\n  }\n\n  // This function authenticates the user. It first checks if the user is authenticated already in this session by checking\n  // for client code. If there is no client code it redirects to the authentication proxy to get a client code\n\n  const authenticate = async () => {\n\n    const queryString = window.location.search;\n    queryString;\n    const urlParams = new URLSearchParams(queryString);\n\n    if (sessionStorage.getItem('gaAccessToken')) {\n      accessToken = sessionStorage.getItem('gaAccessToken');\n      tokenCreated = sessionStorage.getItem('gaTokenCreated')\n    } else if (urlParams.get('gaToken')) {\n      accessToken = urlParams.get('gaToken');\n      tokenCreated = urlParams.get('gaTokenCreated') * 1000; // to miliseconds\n      sessionStorage.setItem('gaAccessToken', accessToken);\n      sessionStorage.setItem('gaTokenCreated', tokenCreated);\n    } else {\n      accessToken = null;\n      tokenCreated = null;\n    }\n\n    // First check if we have already an access token in the session.\n\n    if (!accessToken) { // if there is no access token then let's get it from the proxy\n      jQuery('.ga-reports-no-auth').toggle();\n    } else { // There is a token, let's check if it is still valid.\n             timeElapsed = (Date.now() - tokenCreated) / 1000; //to seconds\n             timeRemaining = 3600 - timeElapsed;      // 3600 seconds TTL for access token\n             if (timeRemaining < 120) {     //\n                   sessionStorage.removeItem('gaAccessToken');\n                   sessionStorage.removeItem('gaTokenCreated');\n                   redirect2AuthProxy();\n             } else if (typeof ga_reports === 'undefined' || typeof ga_reports.ga_view_id === 'undefined') {\n                   await gapi.analytics.auth.authorize({\n                       serverAuth: {\n                           access_token: accessToken\n                       }\n                   });\n                   // Token is valid, check if the view is selected, if not present the view form\n\n                   var viewSelector = new gapi.analytics.ViewSelector({container: 'view-selector'});\n                   jQuery('.ga-view-form').toggle();\n\n                   viewSelector.execute();    // Run the view selector after a successful authentication\n\n                   viewSelector.on('change', function (ids) {\n                      jQuery('#ga-save-view').val(ids);\n                   });\n             } else {\n                   jQuery('.ga-reports-section').css(\"display\", \"flex\");\n                   // Now authorize the user for analytics API given the access token to the gapi object\n                   await gapi.analytics.auth.authorize({\n                       serverAuth: {\n                          access_token: accessToken\n                       }\n                   });\n             }\n    }\n\n    jQuery('#ga-auth').on('click', function (e) {\n      e.preventDefault();\n      redirect2AuthProxy();\n    });\n\n  }\n\n// Starting point..\n\n  async function displayGeneralReports() {\n    var allEventsReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], dimensions: [{\n        name: 'ga:date',\n      }],\n    }\n\n    var top10DownloadsReportRequest = {\n      viewId: ga_reports.ga_view_id,  includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: 'ga:eventAction==Download', dimensions: [{\n        name: 'ga:eventLabel',\n      }], orderBys: [{\n        fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    var top10EmailLinksReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: 'ga:eventAction==Email Link', dimensions: [{\n        name: 'ga:eventLabel',\n      }], orderBys: [{\n        fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n\n    var generalReportBatchRequests = [allEventsReportRequest, top10DownloadsReportRequest, top10EmailLinksReportRequest];\n    reportResponse = await queryReports(generalReportBatchRequests);\n    drawLineChart(\"All Event Clicks\", \"Date\", \"date\", \"Events\", \"number\", reportResponse.result.reports[0].data.rows, 'all-events-chart');\n    drawTableChart(\"Top 10 Downloads\", \"Top 10 Downloads\", \"string\", \"Downloads\", \"number\", reportResponse.result.reports[1].data.rows, 'top10-downloads-chart');\n    drawTableChart(\"Top 10 Email Links\", \"Top 10 Email Links\", \"string\", \"Clicks\", \"number\", reportResponse.result.reports[2].data.rows, 'top10-email-links-chart');\n  }\n\n  async function displayClicksReports() {\n    // Since there are other categories/labels/actions which are not related to clicks we need to filter the clicks only according to the\n    // relevant defined categories/labels/actions. In case they are not defined we need to define a dummy filter\n\n    var filterExpressionArray = new Array;\n    var filterExpression = \"\";\n\n    if (ga_reports.clicksCategories) filterExpressionArray.push(ga_reports.clicksCategories);\n    if (ga_reports.clicksLabels) filterExpressionArray.push(ga_reports.clicksLabels);\n    if (ga_reports.clicksActions) filterExpressionArray.push(ga_reports.clicksActions);\n    if (filterExpression.length = 0) filterExpressionArray.push (\"ga:eventCategory==-9999999\"); // Dummy expression in case all are blanks\n\n    var allClicksReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpressionArray.join(), dimensions: [{\n        name: 'ga:date',\n      }],\n    }\n\n    filterExpression = ga_reports.clicksCategories ? ga_reports.clicksCategories : \"ga:eventCategory==-9999999\";\n    var top10ClicksByCategoryReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression , dimensions: [{\n        name: 'ga:eventCategory',\n      }], orderBys: [{\n        fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    filterExpression = ga_reports.clicksLabels ? ga_reports.clicksLabels : \"ga:eventLabel==-9999999\";\n    var top10ClicksByLabelReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression, dimensions: [{\n        name: 'ga:eventLabel',\n      }], orderBys: [{\n        fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    filterExpression = ga_reports.clicksActions ? ga_reports.clicksActions : \"ga:eventAction==-9999999\";\n    var top10ClicksByActionReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression, dimensions: [{\n        name: 'ga:eventAction',\n      }], orderBys: [{\n         fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    var allClicksReportBatchRequests = [allClicksReportRequest, top10ClicksByCategoryReportRequest,top10ClicksByLabelReportRequest,top10ClicksByActionReportRequest];\n    reportResponse = await queryReports(allClicksReportBatchRequests);\n    drawLineChart(\"All Clicks\", \"Date\", \"date\", \"Events\", \"number\", reportResponse.result.reports[0].data.rows, 'all-clicks-chart');\n    drawTableChart(\"\", \"Top 10 Clicks by Category\", \"string\", \"Clicks\", \"number\", reportResponse.result.reports[1].data.rows, 'top10-clicks-by-category-chart');\n    drawTableChart(\"\", \"Top 10 Clicks by Label\", \"string\", \"Clicks\", \"number\", reportResponse.result.reports[2].data.rows, 'top10-clicks-by-label-chart');\n    drawTableChart(\"\", \"Top 10 Clicks by Action\", \"string\", \"Clicks\", \"number\", reportResponse.result.reports[3].data.rows, 'top10-clicks-by-action-chart');\n  }\n\n  async function displayScrollReports() {\n    // Since there are other categories/labels/actions which are not related to clicks we need to filter the clicks only according to the\n    // relevant defined categories/labels/actions. In case they are not defined we need to define a dummy filter\n\n    var filterExpressionArray = new Array;\n    var filterExpression = \"\";\n\n    if (ga_reports.scrollCategories) filterExpressionArray.push(ga_reports.scrollCategories);\n    if (ga_reports.scrollLabels) filterExpressionArray.push(ga_reports.scrollLabels);\n    if (ga_reports.scrollActions) filterExpressionArray.push(ga_reports.scrollActions);\n    if (filterExpression.length = 0) filterExpressionArray.push (\"ga:eventCategory==-9999999\"); // Dummy expression in case all are blanks\n\n    var allScrollEventsReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpressionArray.join(), dimensions: [{\n        name: 'ga:date',\n      }],\n    }\n\n    filterExpression = ga_reports.scrollCategories ? ga_reports.scrollCategories : \"ga:eventCategory==-9999999\";\n    var top10ScrollByCategoryReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression , dimensions: [{\n        name: 'ga:eventCategory',\n      }], orderBys: [{\n         fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    filterExpression = ga_reports.scrollLabels ? ga_reports.scrollLabels : \"ga:eventLabel==-9999999\";\n    var top10ScrollByLabelReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression, dimensions: [{\n        name: 'ga:eventLabel',\n      }], orderBys: [{\n         fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    filterExpression = ga_reports.scrollActions ? ga_reports.scrollActions : \"ga:eventAction==-9999999\";\n    var top10ScrollByActionReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression, dimensions: [{\n        name: 'ga:eventAction',\n      }], orderBys: [{\n         fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    var allScrollReportBatchRequests = [allScrollEventsReportRequest, top10ScrollByCategoryReportRequest,top10ScrollByLabelReportRequest,top10ScrollByActionReportRequest];\n    reportResponse = await queryReports(allScrollReportBatchRequests);\n    drawLineChart(\"All Scroll Events\", \"Date\", \"date\", \"Events\", \"number\", reportResponse.result.reports[0].data.rows, 'all-scroll-events-chart');\n    drawTableChart(\"\", \"Top 10 Scroll Events by Category\", \"string\", \"Events\", \"number\", reportResponse.result.reports[1].data.rows, 'top10-scroll-by-category-chart');\n    drawTableChart(\"\", \"Top 10 Scroll Events by Label\", \"string\", \"Events\", \"number\", reportResponse.result.reports[2].data.rows, 'top10-scroll-by-label-chart');\n    drawTableChart(\"\", \"Top 10 Scroll Events by Action\", \"string\", \"Events\", \"number\", reportResponse.result.reports[3].data.rows, 'top10-scroll-by-action-chart');\n  }\n\n\n\n// Query the API and print the results to the page.\n  function queryReports(reportBatchRequests) {\n    return gapi.client.request({\n      path: '/v4/reports:batchGet', root: 'https://analyticsreporting.googleapis.com/', method: 'POST', body: {\n        reportRequests: reportBatchRequests,\n      }\n    });\n  }\n\n  function toDate(stringDate) {\n    var year = stringDate.substr(0, 4), month = stringDate.substr(4, 2) - 1,    // -1 as months are 0 indexed\n      day = stringDate.substr(6, 2);\n    var D = new Date(year, month, day);\n    return (D.getFullYear() == year && D.getMonth() == month && D.getDate() == day) ? D : 'invalid date';\n  }\n\n  function drawLineChart(title, xAxisName, xAxisType, yAxisName, yAxisType, reportRows, chartContainer) {\n\n    var data = new google.visualization.DataTable();\n\n    data.addColumn(xAxisType, xAxisName);\n    data.addColumn(yAxisType, yAxisName);\n    if ((reportRows != null) && (reportRows != undefined) && (reportRows.length > 0)) {\n      reportRows.forEach(row => data.addRow([toDate(row.dimensions[0]), parseInt(row.metrics[0].values[0])]));\n    }\n    var options = {\n      //title: title,\n      curveType: 'function', legend: {position: 'bottom', textStyle: {fontSize:12}},\n    };\n\n    var chart = new google.charts.Line(document.getElementById(chartContainer));\n    chart.draw(data, google.charts.Line.convertOptions(options));\n  }\n\n  function drawTableChart(title, col1Name, col1Type, col2Name, col2Type, reportRows, chartContainer) {\n\n    var data = new google.visualization.DataTable();\n\n\n    var options;\n    if ((reportRows != null) && (reportRows != undefined) && (reportRows.length > 0)) {\n      data.addColumn(col1Type, col1Name);\n      data.addColumn(col2Type, col2Name);\n      data.setColumnProperty(0, 'className', 'ga-top-chart-text');\n      reportRows.forEach(row => data.addRow([row.dimensions[0], parseInt(row.metrics[0].values[0])]));\n      options = {\n        showRowNumber: true, width: '100%', height: '100%',\n      };\n    } else {\n      data.addColumn(\"string\", col1Name);\n      data.setColumnProperty(0, 'className', 'ga-top-chart-text-empty');\n      data.addRows( [[ \"No events found\"]]);\n      options = {\n        showRowNumber: false, width: '100%', height: '391px', minWidth: '100px'\n      };\n    }\n\n\n\n    var table = new google.visualization.Table(document.getElementById(chartContainer));\n    table.draw(data, options);\n  }\n\n\n})();\n"]}